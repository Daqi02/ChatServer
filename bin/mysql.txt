

create table User(
    id INT primary key auto_increment, 
    name varchar(50) not null, 
    password varchar(50) not null, 
    state enum('online', 'offline') default 'offline', unique(name)
);

create table Friend(
    userid int not null,
    friendid int not null,
    primary key(userid, friendid),
    foreign key(userid) references User(id),
    foreign key(friendid) references User(id)
);

create table AllGroup(
    id INT primary key auto_increment,
    groupname varchar(50) not null,
    groupdesc varchar(200) default ''
);

create table GroupUser(
    groupid int not null,
    userid int not null,
    grouprole enum('creator', 'administrator', 'normal') default 'normal',
    foreign key(userid) references User(id),
    foreign key(groupid) references AllGroup(id),
    primary key(groupid, userid) 
);

create table OfflineMessage(
    userid INT not null,
    message varchar(500) not null,
    foreign key(userid) references User(id) 
);